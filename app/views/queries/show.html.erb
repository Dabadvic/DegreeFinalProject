<% provide(:title, "Consultas") %>

<h1>Consulta</h1>
<ul>
	<li>Descripción: <%= @query.description %></li>
	<li>Fecha de creación: <%= @query.created_at %></li>
	<li>Estado: <%= @estado %></li>
	<li>Discretizador aplicado: <%= @query.discretization %></li>
	<li>Algoritmo aplicado: <%= @query.algorithm %></li>
	<li>Ruta: <%= File.dirname(@query.queryfile.current_path.to_s) if @query.queryfile? %></li>
	<li>Archivo: <%= File.basename(@query.queryfile.to_s, ".*") if @query.queryfile? %></li>
	<li>Tipo: <%= File.extname(@query.queryfile.to_s) if @query.queryfile? %> </li>
	
	<table>
		<% if File.exist?(@dis_file) %>
			Datos discretizador: <br>
			<% File.readlines(@dis_file).each do |line| %>
				<%= line %> <br>
			<% end %>
		<% end %>
	</table>

	<% if @resultado != nil %>
		<% case @query.algorithm %>
			<% when "mesdif" %>
				<%= render 'results_mesdif', resultado: @resultado %>
			<% else %>
				<%= render 'results', resultado: @resultado %>
		<% end %>
	<% else %>
		No se encontró el resultado, ¿hubo un error?
	<% end %>

	

</ul>

<%= link_to 'Atrás', queries_path %>